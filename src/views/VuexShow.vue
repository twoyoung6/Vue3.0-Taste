<template>
  <div>
    <em>Vuex çš„æ¼”ç¤º</em>
    <p>{{ name }}</p>
    <van-button icon="plus" @click="updateName('ğŸ”‘')">ç‚¹å‡»æ”¹å˜åå­—</van-button>

    <van-button icon="flower-o" @click="deferName('+')">æ”¹å›æ¥</van-button>

    <p>é™æ€çŠ¶æ€ï¼š{{ fullName }}</p>
  </div>
</template>

<script>
import { useStore } from "vuex";
import { computed } from "vue";
export default {
  name: "VuexShow",
  setup() {
    const store = useStore();
    // 1: å•ä¸ªå¼•å…¥
    const name = computed(() => store.state.name);
    // 2: å¼•å…¥æ•´ä¸ªstate
    const state = computed(() => store.state);
    console.log("vuexçš„å®ä¾‹", state.value); // åˆ«å¿˜äº†.value

    // 3: æ–¹æ³•å…¶å®å°±ç›´æ¥ä»æœ¬ä½“ä¸Šå–ä¸‹æ¥äº†
    const updateName = (newName) => store.commit("updateName", newName);

    // 4: actionä¸€ä¸ªæ„æ€
    const deferName = () => store.dispatch("deferName");

    // 5: getter æ²¡å˜åŒ–ï¼ˆé™æ€çŠ¶æ€ï¼‰
    const fullName = computed(() => store.getters.fullName);
    return {
      name,
      fullName,
      deferName,
      updateName,
    };
  },
};
</script>